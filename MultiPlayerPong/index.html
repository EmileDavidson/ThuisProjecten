<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title></title>
</head>

<body>

  <body>
    <canvas id="canvas"></canvas>
    <script>
      document.onmousemove = function (e) {
        var x = e.pageX;
        var y = e.pageY;
        document.title = "X: " + x + "  Y: " + y;
      };
    </script>
  </body>
</body>

<canvas id="canvas"></canvas>
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io();

  //#region  canvas
  const canvas = document.querySelector('canvas');
  let context = canvas.getContext('2d');

  canvas.width = 1050;
  canvas.height = 600;
  let width = canvas.width;
  let height = canvas.height;
  //#endregion
  let SpelerD = {};
  SpelerD.width;
  SpelerD.height;

  let speler1 = {};
  speler1.x = 10;
  speler1.y = 0;
  speler1.score = 0;

  let speler2 = {};
  speler2.x = 0;
  speler2.y = 0;
  speler2.score = 0;

  let ball = {};
  ball.x = 0;
  ball.y = 0;
  ball.radius = 0;
  ball.color = "white";

  socket.on("setup", function (sh, sw, s1x, s2x, bx, by, br) {
    SpelerD.height = sh;
    SpelerD.width = sw;
    speler1.x = 20;
    speler2.x = canvas.width - 25 - 20;

    ball.x = bx;
    ball.y = by;
    ball.radius = br;

  });

  socket.on("updatevars", function (p1y, p2y, bx, by, s1s, s2s) {
    speler1.y = p1y;
    speler2.y = p2y;
    ball.x = bx;
    ball.y = by;
    speler1.score = s1s;
    speler2.score = s2s;
  });

  function draw() {
    context.clearRect(0, 0, height, width);
    context.beginPath();
    context.fillStyle = "black";
    context.fillRect(0, 0, width, height);
    context.closePath();
    context.fill();
    context.stroke();
    //speler1
    context.beginPath();
    context.fillStyle = "white";
    context.fillRect(speler1.x, speler1.y, SpelerD.width, SpelerD.height);
    context.closePath();
    context.fill();
    context.stroke();
    //speler2
    context.beginPath();
    context.fillStyle = "white";
    context.fillRect(speler2.x, speler2.y, SpelerD.width, SpelerD.height);
    context.closePath();
    context.fill();
    context.stroke();
    //ball
    context.beginPath();
    context.fillStyle = "white";
    context.arc(ball.x, ball.y, ball.radius, 0, 2 * Math.PI);
    context.closePath();
    context.fill();
    context.stroke();
    //score
    context.font = "30px Arial";
    context.fillText(speler1.score + " | " + speler2.score, canvas.width / 2 - 50, 50);
  }

  setInterval(draw, 10);

  document.addEventListener('mousemove', function (e) {
    let y = e.clientY - (SpelerD.height / 2);
    if(y <= 0){y = 0}
    if(y + SpelerD.height >= canvas.height){ y = canvas.height - SpelerD.height}
    socket.emit("mousemove", y);
  });

</script>

</html>
